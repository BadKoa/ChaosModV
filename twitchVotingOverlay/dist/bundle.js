!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o=function(){function e(){this.handlers=[]}return e.prototype.addEventListener=function(e){this.handlers.push(e)},e.prototype.removeEventListener=function(e){this.handlers=this.handlers.filter((function(t){return t!==e}))},e.prototype.dispatch=function(e){this.handlers.slice(0).forEach((function(t){return t(e)}))},e}(),i=function(){function e(e){this.WS=null,this.createEvent=new o,this.endEvent=new o,this.noVoteRoundEvent=new o,this.updateEvent=new o,this.URL=e,this.onSocketClose=this.onSocketClose.bind(this),this.onSocketError=this.onSocketError.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.onSocketOpen=this.onSocketOpen.bind(this),this.connect()}return e.prototype.addCreateVoteListener=function(e){this.createEvent.addEventListener(e)},e.prototype.addEndVoteListener=function(e){this.endEvent.addEventListener(e)},e.prototype.addNoVotingRoundListener=function(e){this.noVoteRoundEvent.addEventListener(e)},e.prototype.addUpdateVoteListener=function(e){this.updateEvent.addEventListener(e)},e.prototype.removeCreateVoteListener=function(e){this.createEvent.removeEventListener(e)},e.prototype.removeNoVotingRoundListener=function(e){this.noVoteRoundEvent.removeEventListener(e)},e.prototype.removeEndVoteListener=function(e){this.endEvent.removeEventListener(e)},e.prototype.removeUpdateVoteListener=function(e){this.updateEvent.removeEventListener(e)},e.prototype.connect=function(){try{this.WS=new WebSocket(this.URL),this.WS.addEventListener("close",this.onSocketClose),this.WS.addEventListener("error",this.onSocketError),this.WS.addEventListener("message",this.onSocketMessage),this.WS.addEventListener("open",this.onSocketOpen)}catch(e){}},e.prototype.onSocketError=function(e){console.log("error in socket occurred: "+e.message+". closing socket"),null!==this.WS&&this.WS.close()},e.prototype.onSocketClose=function(){var t=this;console.log("socket closed, reconnecting in "+e.RECONNECT_INTERVAL+"ms"),window.setTimeout((function(){return t.connect()}),e.RECONNECT_INTERVAL)},e.prototype.onSocketMessage=function(e){try{var t=JSON.parse(e.data);switch(t.request){case"CREATE":this.createEvent.dispatch(t);break;case"END":this.endEvent.dispatch(t);break;case"NO_VOTING_ROUND":this.noVoteRoundEvent.dispatch(t);break;case"UPDATE":this.updateEvent.dispatch(t);break;default:console.warn("unknown request type: "+t.request)}}catch(e){console.error("failed to parse json data: "+e)}},e.prototype.onSocketOpen=function(){console.log("successfully connected to websocket")},e.RECONNECT_INTERVAL=1e3,e}(),r=function(){function e(e){this._isAnimating=!1,this.container=e,this.bar=document.createElement("div"),this.barProgression=document.createElement("div"),this.labelContainer=document.createElement("div"),this.labelLabel=document.createElement("span"),this.labelMatch=document.createElement("span"),this.labelValue=document.createElement("span"),this.bar.classList.add("bar"),this.barProgression.classList.add("progression"),this.labelContainer.classList.add("labelContainer"),this.labelContainer.append(this.labelMatch,this.labelLabel,this.labelValue),this.bar.append(this.barProgression),this.bar.append(this.labelContainer),this.container.append(this.bar)}return Object.defineProperty(e.prototype,"label",{set:function(e){this.labelLabel.innerText=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"match",{set:function(e){this.labelMatch.innerText=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this.labelValue.innerText=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{set:function(e){this.barProgression.style.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAnimating",{get:function(){return this._isAnimating},enumerable:!1,configurable:!0}),e.prototype.fadeIn=function(e,t){void 0===t&&(t=0),this.bar.style.animationDelay=t+"ms",this.bar.style.animationDuration=e+"ms",this.bar.classList.add("slideIn"),this.bar.classList.remove("slideOut")},e.prototype.fadeOut=function(e,t){void 0===t&&(t=0),this.bar.style.animationDelay=t+"ms",this.bar.style.animationDuration=e+"ms",this.bar.classList.add("slideOut"),this.bar.classList.remove("slideIn")},e}(),s=function(){function e(e,t){this.bars=[],this.container=e,this.onCreateVote=this.onCreateVote.bind(this),this.onEndVote=this.onEndVote.bind(this),this.onUpdateVote=this.onUpdateVote.bind(this),t.addCreateVoteListener(this.onCreateVote),t.addEndVoteListener(this.onEndVote),t.addUpdateVoteListener(this.onUpdateVote)}return e.prototype.onCreateVote=function(){this.bars.forEach((function(e,t){var n=100*t;e.fadeOut(600,n),setTimeout((function(){return e.fadeIn(600)}),600+n)}))},e.prototype.onEndVote=function(){},e.prototype.onUpdateVote=function(e){var t=this,n=e.totalVotes,o=e.voteOptions,i=e.votingMode;if(o.length!==this.bars.length){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.bars=o.map((function(e,n){return new r(t.container)}))}for(var s=0;s<o.length;s++){var a=this.bars[s],c=o[s];if(!a.isAnimating){var l=0;l=0===c.value?0:Math.floor(c.value/n*100),a.label=c.label,a.match=c.matches.join("/").concat("."),"MAJORITY"===i?a.value=c.value.toString():"PERCENTAGE"===i&&(a.value=l+"%"),a.width=l+"%"}}},e}(),a=document.getElementById("barContainer"),c=document.getElementById("totalVotes");if(null===a)throw new Error("could not find bar container in DOM");if(null===c)throw new Error("could not find total votes element in DOM");var l=new i("ws://localhost:9091");l.addUpdateVoteListener((function(e){c.innerText="Total Votes: "+e.totalVotes})),new s(a,l)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpZ2h0RXZlbnQvbGlnaHRFdmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhb3NPdmVybGF5Q2xpZW50L2NsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFyT3ZlcmxheS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJoYW5kbGVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyIiwidGhpcyIsInB1c2giLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZmlsdGVyIiwiaCIsImRpc3BhdGNoIiwiZGF0YSIsInNsaWNlIiwiZm9yRWFjaCIsIlVSTCIsIldTIiwiY3JlYXRlRXZlbnQiLCJMaXRlRXZlbnQiLCJlbmRFdmVudCIsIm5vVm90ZVJvdW5kRXZlbnQiLCJ1cGRhdGVFdmVudCIsIm9uU29ja2V0Q2xvc2UiLCJvblNvY2tldEVycm9yIiwib25Tb2NrZXRNZXNzYWdlIiwib25Tb2NrZXRPcGVuIiwiY29ubmVjdCIsImFkZENyZWF0ZVZvdGVMaXN0ZW5lciIsImxpc3RlbmVyIiwiYWRkRW5kVm90ZUxpc3RlbmVyIiwiYWRkTm9Wb3RpbmdSb3VuZExpc3RlbmVyIiwiYWRkVXBkYXRlVm90ZUxpc3RlbmVyIiwicmVtb3ZlQ3JlYXRlVm90ZUxpc3RlbmVyIiwicmVtb3ZlTm9Wb3RpbmdSb3VuZExpc3RlbmVyIiwicmVtb3ZlRW5kVm90ZUxpc3RlbmVyIiwicmVtb3ZlVXBkYXRlVm90ZUxpc3RlbmVyIiwiV2ViU29ja2V0IiwiZSIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJjbG9zZSIsIkNoYW9zT3ZlcmxheUNsaWVudCIsIlJFQ09OTkVDVF9JTlRFUlZBTCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJNRVNTQUdFIiwiSlNPTiIsInBhcnNlIiwicmVxdWVzdCIsIndhcm4iLCJjb250YWluZXIiLCJfaXNBbmltYXRpbmciLCJiYXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJiYXJQcm9ncmVzc2lvbiIsImxhYmVsQ29udGFpbmVyIiwibGFiZWxMYWJlbCIsImxhYmVsTWF0Y2giLCJsYWJlbFZhbHVlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kIiwiaW5uZXJUZXh0Iiwic3R5bGUiLCJ3aWR0aCIsImZhZGVJbiIsImR1cmF0aW9uIiwiZGVsYXkiLCJhbmltYXRpb25EZWxheSIsImFuaW1hdGlvbkR1cmF0aW9uIiwicmVtb3ZlIiwiZmFkZU91dCIsIm92ZXJsYXlDbGllbnQiLCJiYXJzIiwib25DcmVhdGVWb3RlIiwib25FbmRWb3RlIiwib25VcGRhdGVWb3RlIiwiaW5kZXgiLCJBTklNQVRJT05fREVMQVkiLCJ0b3RhbFZvdGVzIiwidm90ZU9wdGlvbnMiLCJ2b3RpbmdNb2RlIiwibGVuZ3RoIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwibWFwIiwiXyIsIkJhciIsIkJBUiIsIlZPVEVfT1BUSU9OIiwiaXNBbmltYXRpbmciLCJwZXJjZW50YWdlIiwiTWF0aCIsImZsb29yIiwibGFiZWwiLCJtYXRjaCIsIm1hdGNoZXMiLCJqb2luIiwiY29uY2F0IiwidG9TdHJpbmciLCJCQVJfQ09OVEFJTkVSIiwiZ2V0RWxlbWVudEJ5SWQi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RyxFQUFZeEcsTUFBTWtILFdBQ0wsZUFBZmxCLElBQTZCTyxFQUFJdkcsTUFBVzBHLEVBQVUsS0FFakVILEVBQUl4QixNQUFXMkIsRUFBVSxPQUc1QixFQXREQSxHQ2xFTVMsRUFBZ0JoRCxTQUFTaUQsZUFBZSxnQkFDeENDLEVBQWNsRCxTQUFTaUQsZUFBZSxjQUU1QyxHQUFzQixPQUFsQkQsRUFBd0IsTUFBTSxJQUFJRyxNQUFNLHVDQUM1QyxHQUFvQixPQUFoQkQsRUFBc0IsTUFBTSxJQUFJQyxNQUFNLDZDQUUxQyxJQUFNQyxFQUFpQixJQUFJLEVBQW1CLHVCQUU5Q0EsRUFBZTVFLHVCQUFzQixTQUFBVSxHQUNwQ2dFLEVBQVl4QyxVQUFZLGdCQUFnQnhCLEVBQVF5QyxjQUdqRCxJQUFJMEIsRUFBV0wsRUFBZUkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgSUxpdGVFdmVudCB9IGZyb20gJy4vaUxpZ2h0RXZlbnQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExpdGVFdmVudDxUPiBpbXBsZW1lbnRzIElMaXRlRXZlbnQ8VD4ge1xyXG5cdHByaXZhdGUgaGFuZGxlcnM6ICgoZGF0YTogVCkgPT4gdm9pZClbXSA9IFtdO1xyXG5cclxuXHRwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lcihoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCk6IHZvaWQge1xyXG5cdFx0dGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHJlbW92ZUV2ZW50TGlzdGVuZXIoaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkIHtcclxuXHRcdHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcihoID0+IGggIT09IGhhbmRsZXIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGRpc3BhdGNoKGRhdGE6IFQpIHtcclxuXHRcdHRoaXMuaGFuZGxlcnMuc2xpY2UoMCkuZm9yRWFjaChoID0+IGgoZGF0YSkpO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgeyBJQ2hhb3NPdmVybGF5Q2xpZW50IH0gZnJvbSAnLi9pQ2xpZW50JztcclxuaW1wb3J0IHsgTGl0ZUV2ZW50IH0gZnJvbSAnLi4vbGlnaHRFdmVudCc7XHJcbmltcG9ydCB7IElDaGFvc092ZXJsYXlWb3RlT3B0aW9uIH0gZnJvbSAnLi9pVm90ZU9wdGlvbic7XHJcbmltcG9ydCB7IElDaGFvc092ZXJsYXlDbGllbnRNZXNzYWdlIH0gZnJvbSAnLi9pTWVzc2FnZSc7XHJcbmltcG9ydCB7IFRDaGFvc092ZXJsYXlDbGllbnRFdmVudCB9IGZyb20gJy4vdEV2ZW50JztcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGFvc092ZXJsYXlDbGllbnQgaW1wbGVtZW50cyBJQ2hhb3NPdmVybGF5Q2xpZW50IHtcclxuXHQvKipcclxuXHQgKiBJbnRlcnZhbCBpbiB3aGljaCB0aGUgd2Vic29ja2V0IGNsaWVudCB0cmllcyB0byByZWNvbm5lY3QgdG9cclxuXHQgKiB0aGUgc2VydmVyXHJcblx0ICovXHJcblx0cHVibGljIHN0YXRpYyBSRUNPTk5FQ1RfSU5URVJWQUwgPSAxMDAwO1xyXG5cclxuXHRwcml2YXRlIFVSTDogc3RyaW5nO1xyXG5cdHByaXZhdGUgV1M6IFdlYlNvY2tldCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgY3JlYXRlRXZlbnQgPSBuZXcgTGl0ZUV2ZW50PElDaGFvc092ZXJsYXlDbGllbnRNZXNzYWdlPigpO1xyXG5cdHByaXZhdGUgZW5kRXZlbnQgPSBuZXcgTGl0ZUV2ZW50PElDaGFvc092ZXJsYXlDbGllbnRNZXNzYWdlPigpO1xyXG5cdHByaXZhdGUgbm9Wb3RlUm91bmRFdmVudCA9IG5ldyBMaXRlRXZlbnQ8SUNoYW9zT3ZlcmxheUNsaWVudE1lc3NhZ2U+KCk7XHJcblx0cHJpdmF0ZSB1cGRhdGVFdmVudCA9IG5ldyBMaXRlRXZlbnQ8SUNoYW9zT3ZlcmxheUNsaWVudE1lc3NhZ2U+KCk7XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihVUkw6IHN0cmluZykge1xyXG5cdFx0dGhpcy5VUkwgPSBVUkw7XHJcblxyXG5cdFx0Ly8gQmluZCB0aGUgbGlzdGVuZXIgbWV0aG9kc1xyXG5cdFx0dGhpcy5vblNvY2tldENsb3NlID0gdGhpcy5vblNvY2tldENsb3NlLmJpbmQodGhpcyk7XHJcblx0XHR0aGlzLm9uU29ja2V0RXJyb3IgPSB0aGlzLm9uU29ja2V0RXJyb3IuYmluZCh0aGlzKTtcclxuXHRcdHRoaXMub25Tb2NrZXRNZXNzYWdlID0gdGhpcy5vblNvY2tldE1lc3NhZ2UuYmluZCh0aGlzKTtcclxuXHRcdHRoaXMub25Tb2NrZXRPcGVuID0gdGhpcy5vblNvY2tldE9wZW4uYmluZCh0aGlzKTtcclxuXHJcblx0XHR0aGlzLmNvbm5lY3QoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhZGRDcmVhdGVWb3RlTGlzdGVuZXIobGlzdGVuZXI6IFRDaGFvc092ZXJsYXlDbGllbnRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jcmVhdGVFdmVudC5hZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyKTtcclxuXHR9XHJcblx0cHVibGljIGFkZEVuZFZvdGVMaXN0ZW5lcihsaXN0ZW5lcjogVENoYW9zT3ZlcmxheUNsaWVudEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLmVuZEV2ZW50LmFkZEV2ZW50TGlzdGVuZXIobGlzdGVuZXIpO1xyXG5cdH1cclxuXHRwdWJsaWMgYWRkTm9Wb3RpbmdSb3VuZExpc3RlbmVyKGxpc3RlbmVyOiBUQ2hhb3NPdmVybGF5Q2xpZW50RXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMubm9Wb3RlUm91bmRFdmVudC5hZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyKTtcclxuXHR9XHJcblx0cHVibGljIGFkZFVwZGF0ZVZvdGVMaXN0ZW5lcihsaXN0ZW5lcjogVENoYW9zT3ZlcmxheUNsaWVudEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLnVwZGF0ZUV2ZW50LmFkZEV2ZW50TGlzdGVuZXIobGlzdGVuZXIpO1xyXG5cdH1cclxuXHRwdWJsaWMgcmVtb3ZlQ3JlYXRlVm90ZUxpc3RlbmVyKGxpc3RlbmVyOiBUQ2hhb3NPdmVybGF5Q2xpZW50RXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuY3JlYXRlRXZlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcik7XHJcblx0fVxyXG5cdHB1YmxpYyByZW1vdmVOb1ZvdGluZ1JvdW5kTGlzdGVuZXIobGlzdGVuZXI6IFRDaGFvc092ZXJsYXlDbGllbnRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5ub1ZvdGVSb3VuZEV2ZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIobGlzdGVuZXIpO1xyXG5cdH1cclxuXHRwdWJsaWMgcmVtb3ZlRW5kVm90ZUxpc3RlbmVyKGxpc3RlbmVyOiBUQ2hhb3NPdmVybGF5Q2xpZW50RXZlbnQpOiB2b2lkIHtcclxuXHRcdHRoaXMuZW5kRXZlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcik7XHJcblx0fVxyXG5cdHB1YmxpYyByZW1vdmVVcGRhdGVWb3RlTGlzdGVuZXIobGlzdGVuZXI6IFRDaGFvc092ZXJsYXlDbGllbnRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy51cGRhdGVFdmVudC5yZW1vdmVFdmVudExpc3RlbmVyKGxpc3RlbmVyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbm5lY3RzIHRvIHRoZSB3ZWJzb2NrZXQgc2VydmVyIGFuZCBhZGRzIGV2ZW50IGxpc3RlbmVyc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgY29ubmVjdCgpOiB2b2lkIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHRoaXMuV1MgPSBuZXcgV2ViU29ja2V0KHRoaXMuVVJMKTtcclxuXHRcdFx0dGhpcy5XUy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsIHRoaXMub25Tb2NrZXRDbG9zZSk7XHJcblx0XHRcdC8vIFwiYXMgYW55XCIgaXMgcmVxdWlyZWQgYmVjYXVzZSB0eXBlc2NyaXB0IHRoaW5rcyB0aGF0IHRoZSB3ZWJzb2NrZXQgXCJvbkVycm9yXCJcclxuXHRcdFx0Ly8gaGFzIGFuIGV2ZW50LCBhbmQgbm90IGFuZCBlcnJvciBhcyBjYWxsYmFjayBkYXRhXHJcblx0XHRcdHRoaXMuV1MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLm9uU29ja2V0RXJyb3IgYXMgYW55KTtcclxuXHRcdFx0dGhpcy5XUy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vblNvY2tldE1lc3NhZ2UpO1xyXG5cdFx0XHR0aGlzLldTLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCB0aGlzLm9uU29ja2V0T3Blbik7XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdC8vIElmIHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBmYWlscyB3ZSBnZXQgYW4gZXJyb3IsXHJcblx0XHRcdC8vIHRoaXMgaXMgY2F1Z2h0IGJ5IHRoZSBcIm9uRXJyb3JcIiBjYWxsYmFja1xyXG5cdFx0fVxyXG5cdH1cclxuXHQvKipcclxuXHQgKiBDYWxsYmFjayBmb3IgdGhlIHdlYnNvY2tldCBjbGllbnQgLSBjYWxsZWQgb24gZXJyb3JzXHJcblx0ICogQHBhcmFtIGVycm9yIHdoYXQgd2VudCB3cm9uZ1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgb25Tb2NrZXRFcnJvcihlcnJvcjogRXJyb3IpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKGBlcnJvciBpbiBzb2NrZXQgb2NjdXJyZWQ6ICR7ZXJyb3IubWVzc2FnZX0uIGNsb3Npbmcgc29ja2V0YCk7XHJcblx0XHRpZiAodGhpcy5XUyAhPT0gbnVsbCkgdGhpcy5XUy5jbG9zZSgpO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBDYWxsYmFjayBmb3IgdGhlIHdlYnNvY2tldCBjbGllbnQgLSBjYWxsZWQgb24gc29ja2V0IGNsb3NlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBvblNvY2tldENsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coYHNvY2tldCBjbG9zZWQsIHJlY29ubmVjdGluZyBpbiAke0NoYW9zT3ZlcmxheUNsaWVudC5SRUNPTk5FQ1RfSU5URVJWQUx9bXNgKTtcclxuXHJcblx0XHR3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLmNvbm5lY3QoKSwgQ2hhb3NPdmVybGF5Q2xpZW50LlJFQ09OTkVDVF9JTlRFUlZBTCk7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIENhbGxiYWNrIGZvciB0aGUgd2Vic29ja2V0IGNsaWVudCAtIGNhbGxlZCB3aGVuIGEgbWVzc2FnZSBpcyByZWNlaXZlZFxyXG5cdCAqIEBwYXJhbSBtZXNzYWdlIG1lc3NhZ2UgdGhhdCB3YXMgcmVjZWl2ZWRcclxuXHQgKi9cclxuXHRwcml2YXRlIG9uU29ja2V0TWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlRXZlbnQpOiB2b2lkIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IE1FU1NBR0U6IElDaGFvc092ZXJsYXlDbGllbnRNZXNzYWdlID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpO1xyXG5cclxuXHRcdFx0c3dpdGNoIChNRVNTQUdFLnJlcXVlc3QpIHtcclxuXHRcdFx0XHRjYXNlICdDUkVBVEUnOlxyXG5cdFx0XHRcdFx0dGhpcy5jcmVhdGVFdmVudC5kaXNwYXRjaChNRVNTQUdFKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ0VORCc6XHJcblx0XHRcdFx0XHR0aGlzLmVuZEV2ZW50LmRpc3BhdGNoKE1FU1NBR0UpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnTk9fVk9USU5HX1JPVU5EJzpcclxuXHRcdFx0XHRcdHRoaXMubm9Wb3RlUm91bmRFdmVudC5kaXNwYXRjaChNRVNTQUdFKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1VQREFURSc6XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUV2ZW50LmRpc3BhdGNoKE1FU1NBR0UpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGNvbnNvbGUud2FybihgdW5rbm93biByZXF1ZXN0IHR5cGU6ICR7TUVTU0FHRS5yZXF1ZXN0fWApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoYGZhaWxlZCB0byBwYXJzZSBqc29uIGRhdGE6ICR7ZX1gKTtcclxuXHRcdH1cclxuXHR9XHJcblx0LyoqXHJcblx0ICogQ2FsbGJhY2sgZm9yIHRoZSB3ZWJzb2NrZXQgY2xpZW50IC0gY2FsbGVkIG9uIHNvY2tldCBvcGVuXHJcblx0ICovXHJcblx0cHJpdmF0ZSBvblNvY2tldE9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zb2xlLmxvZygnc3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byB3ZWJzb2NrZXQnKTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUNoYW9zT3ZlcmxheUNsaWVudCB9IGZyb20gJy4vY2hhb3NPdmVybGF5Q2xpZW50L2lDbGllbnQnO1xyXG5pbXBvcnQgeyBJQ2hhb3NPdmVybGF5Q2xpZW50TWVzc2FnZSB9IGZyb20gJy4vY2hhb3NPdmVybGF5Q2xpZW50L2lNZXNzYWdlJztcclxuXHJcbmNvbnN0IEFOSU1BVElPTl9ERUxBWV9ERUxUQSA9IDEwMDtcclxuY29uc3QgQU5JTUFUSU9OX0xFTkdUSCA9IDYwMDtcclxuXHJcbmNsYXNzIEJhciB7XHJcblx0cHJpdmF0ZSBfaXNBbmltYXRpbmcgPSBmYWxzZTtcclxuXHRwcml2YXRlIGJhcjogSFRNTERpdkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBiYXJQcm9ncmVzc2lvbjogSFRNTERpdkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xyXG5cdHByaXZhdGUgbGFiZWxMYWJlbDogSFRNTFNwYW5FbGVtZW50O1xyXG5cdHByaXZhdGUgbGFiZWxNYXRjaDogSFRNTFNwYW5FbGVtZW50O1xyXG5cdHByaXZhdGUgbGFiZWxWYWx1ZTogSFRNTFNwYW5FbGVtZW50O1xyXG5cdHByaXZhdGUgbGFiZWxDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuXHRwdWJsaWMgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblxyXG5cdFx0Ly8gQ29uc3RydWN0IGJhclxyXG5cdFx0dGhpcy5iYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMuYmFyUHJvZ3Jlc3Npb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMubGFiZWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMubGFiZWxMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRcdHRoaXMubGFiZWxNYXRjaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRcdHRoaXMubGFiZWxWYWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHJcblx0XHR0aGlzLmJhci5jbGFzc0xpc3QuYWRkKCdiYXInKTtcclxuXHRcdHRoaXMuYmFyUHJvZ3Jlc3Npb24uY2xhc3NMaXN0LmFkZCgncHJvZ3Jlc3Npb24nKTtcclxuXHRcdHRoaXMubGFiZWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbGFiZWxDb250YWluZXInKTtcclxuXHJcblx0XHR0aGlzLmxhYmVsQ29udGFpbmVyLmFwcGVuZCh0aGlzLmxhYmVsTWF0Y2gsIHRoaXMubGFiZWxMYWJlbCwgdGhpcy5sYWJlbFZhbHVlKTtcclxuXHJcblx0XHR0aGlzLmJhci5hcHBlbmQodGhpcy5iYXJQcm9ncmVzc2lvbik7XHJcblx0XHR0aGlzLmJhci5hcHBlbmQodGhpcy5sYWJlbENvbnRhaW5lcik7XHJcblx0XHR0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5iYXIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBsYWJlbCh2YWx1ZTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmxhYmVsTGFiZWwuaW5uZXJUZXh0ID0gdmFsdWU7XHJcblx0fVxyXG5cdHB1YmxpYyBzZXQgbWF0Y2godmFsdWU6IHN0cmluZykge1xyXG5cdFx0dGhpcy5sYWJlbE1hdGNoLmlubmVyVGV4dCA9IHZhbHVlO1xyXG5cdH1cclxuXHRwdWJsaWMgc2V0IHZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMubGFiZWxWYWx1ZS5pbm5lclRleHQgPSB2YWx1ZTtcclxuXHR9XHJcblx0cHVibGljIHNldCB3aWR0aCh2YWx1ZTogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmJhclByb2dyZXNzaW9uLnN0eWxlLndpZHRoID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0IGlzQW5pbWF0aW5nKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2lzQW5pbWF0aW5nO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGZhZGVJbihkdXJhdGlvbjogbnVtYmVyLCBkZWxheTogbnVtYmVyID0gMCk6IHZvaWQge1xyXG5cdFx0dGhpcy5iYXIuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBgJHtkZWxheX1tc2A7XHJcblx0XHR0aGlzLmJhci5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcclxuXHRcdHRoaXMuYmFyLmNsYXNzTGlzdC5hZGQoJ3NsaWRlSW4nKTtcclxuXHRcdHRoaXMuYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlT3V0Jyk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZmFkZU91dChkdXJhdGlvbjogbnVtYmVyLCBkZWxheTogbnVtYmVyID0gMCk6IHZvaWQge1xyXG5cdFx0dGhpcy5iYXIuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBgJHtkZWxheX1tc2A7XHJcblx0XHR0aGlzLmJhci5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcclxuXHRcdHRoaXMuYmFyLmNsYXNzTGlzdC5hZGQoJ3NsaWRlT3V0Jyk7XHJcblx0XHR0aGlzLmJhci5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZUluJyk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmFyT3ZlcmxheSB7XHJcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xyXG5cdHByaXZhdGUgYmFyczogQmFyW10gPSBbXTtcclxuXHJcblx0cHVibGljIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIG92ZXJsYXlDbGllbnQ6IElDaGFvc092ZXJsYXlDbGllbnQpIHtcclxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cclxuXHRcdC8vIEJpbmQgbGlzdGVuZXIgbWV0aG9kc1xyXG5cdFx0dGhpcy5vbkNyZWF0ZVZvdGUgPSB0aGlzLm9uQ3JlYXRlVm90ZS5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5vbkVuZFZvdGUgPSB0aGlzLm9uRW5kVm90ZS5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5vblVwZGF0ZVZvdGUgPSB0aGlzLm9uVXBkYXRlVm90ZS5iaW5kKHRoaXMpO1xyXG5cclxuXHRcdC8vIEFkZCBsaXN0ZW5lciB0byB0aGUgb3ZlcmxheSBjbGllbnRcclxuXHRcdG92ZXJsYXlDbGllbnQuYWRkQ3JlYXRlVm90ZUxpc3RlbmVyKHRoaXMub25DcmVhdGVWb3RlKTtcclxuXHRcdG92ZXJsYXlDbGllbnQuYWRkRW5kVm90ZUxpc3RlbmVyKHRoaXMub25FbmRWb3RlKTtcclxuXHRcdG92ZXJsYXlDbGllbnQuYWRkVXBkYXRlVm90ZUxpc3RlbmVyKHRoaXMub25VcGRhdGVWb3RlKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgb25DcmVhdGVWb3RlKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5iYXJzLmZvckVhY2goKGJhciwgaW5kZXgpID0+IHtcclxuXHRcdFx0Y29uc3QgQU5JTUFUSU9OX0RFTEFZID0gaW5kZXggKiBBTklNQVRJT05fREVMQVlfREVMVEE7XHJcblx0XHRcdGJhci5mYWRlT3V0KEFOSU1BVElPTl9MRU5HVEgsIEFOSU1BVElPTl9ERUxBWSk7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4gYmFyLmZhZGVJbihBTklNQVRJT05fTEVOR1RIKSwgQU5JTUFUSU9OX0xFTkdUSCArIEFOSU1BVElPTl9ERUxBWSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0cHJpdmF0ZSBvbkVuZFZvdGUoKTogdm9pZCB7fVxyXG5cdHByaXZhdGUgb25VcGRhdGVWb3RlKG1lc3NhZ2U6IElDaGFvc092ZXJsYXlDbGllbnRNZXNzYWdlKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IHRvdGFsVm90ZXMsIHZvdGVPcHRpb25zLCB2b3RpbmdNb2RlIH0gPSBtZXNzYWdlO1xyXG5cclxuXHRcdGlmICh2b3RlT3B0aW9ucy5sZW5ndGggIT09IHRoaXMuYmFycy5sZW5ndGgpIHtcclxuXHRcdFx0d2hpbGUgKHRoaXMuY29udGFpbmVyLmZpcnN0Q2hpbGQpIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHR0aGlzLmJhcnMgPSB2b3RlT3B0aW9ucy5tYXAoKF8sIGluZGV4KSA9PiBuZXcgQmFyKHRoaXMuY29udGFpbmVyKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB2b3RlT3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBCQVIgPSB0aGlzLmJhcnNbaV07XHJcblx0XHRcdGNvbnN0IFZPVEVfT1BUSU9OID0gdm90ZU9wdGlvbnNbaV07XHJcblxyXG5cdFx0XHRpZiAoQkFSLmlzQW5pbWF0aW5nKSBjb250aW51ZTtcclxuXHJcblx0XHRcdGxldCBwZXJjZW50YWdlID0gMDtcclxuXHRcdFx0aWYgKFZPVEVfT1BUSU9OLnZhbHVlID09PSAwKSBwZXJjZW50YWdlID0gMDtcclxuXHRcdFx0ZWxzZSBwZXJjZW50YWdlID0gTWF0aC5mbG9vcigoVk9URV9PUFRJT04udmFsdWUgLyB0b3RhbFZvdGVzKSAqIDEwMCk7XHJcblxyXG5cdFx0XHRCQVIubGFiZWwgPSBWT1RFX09QVElPTi5sYWJlbDtcclxuXHRcdFx0QkFSLm1hdGNoID0gVk9URV9PUFRJT04ubWF0Y2hlcy5qb2luKCcvJykuY29uY2F0KCcuJyk7XHJcblxyXG5cdFx0XHRpZiAodm90aW5nTW9kZSA9PT0gJ01BSk9SSVRZJykge1xyXG5cdFx0XHRcdEJBUi52YWx1ZSA9IFZPVEVfT1BUSU9OLnZhbHVlLnRvU3RyaW5nKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAodm90aW5nTW9kZSA9PT0gJ1BFUkNFTlRBR0UnKSBCQVIudmFsdWUgPSBgJHtwZXJjZW50YWdlfSVgO1xyXG5cclxuXHRcdFx0QkFSLndpZHRoID0gYCR7cGVyY2VudGFnZX0lYDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ2hhb3NPdmVybGF5Q2xpZW50IH0gZnJvbSAnLi9jaGFvc092ZXJsYXlDbGllbnQnO1xyXG5pbXBvcnQgeyBCYXJPdmVybGF5IH0gZnJvbSAnLi9iYXJPdmVybGF5JztcclxuXHJcbi8vIEdldCBET00gZWxlbWVudHNcclxuY29uc3QgQkFSX0NPTlRBSU5FUiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJDb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XHJcbmNvbnN0IFRPVEFMX1ZPVEVTID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsVm90ZXMnKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XHJcblxyXG5pZiAoQkFSX0NPTlRBSU5FUiA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgZmluZCBiYXIgY29udGFpbmVyIGluIERPTScpO1xyXG5pZiAoVE9UQUxfVk9URVMgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGZpbmQgdG90YWwgdm90ZXMgZWxlbWVudCBpbiBET00nKTtcclxuXHJcbmNvbnN0IE9WRVJMQVlfQ0xJRU5UID0gbmV3IENoYW9zT3ZlcmxheUNsaWVudCgnd3M6Ly9sb2NhbGhvc3Q6OTA5MScpO1xyXG5cclxuT1ZFUkxBWV9DTElFTlQuYWRkVXBkYXRlVm90ZUxpc3RlbmVyKG1lc3NhZ2UgPT4ge1xyXG5cdFRPVEFMX1ZPVEVTLmlubmVyVGV4dCA9IGBUb3RhbCBWb3RlczogJHttZXNzYWdlLnRvdGFsVm90ZXN9YDtcclxufSk7XHJcblxyXG5uZXcgQmFyT3ZlcmxheShCQVJfQ09OVEFJTkVSLCBPVkVSTEFZX0NMSUVOVCk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=