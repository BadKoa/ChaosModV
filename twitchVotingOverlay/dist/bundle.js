!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o=function(){function e(){this.handlers=[]}return e.prototype.addEventListener=function(e){this.handlers.push(e)},e.prototype.removeEventListener=function(e){this.handlers=this.handlers.filter((function(t){return t!==e}))},e.prototype.dispatch=function(e){this.handlers.slice(0).forEach((function(t){return t(e)}))},e}(),r=function(){function e(e){this.createEvent=new o,this.updateEvent=new o,this.WS=null,this.URL=e,this.onSocketClose=this.onSocketClose.bind(this),this.onSocketError=this.onSocketError.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.onSocketOpen=this.onSocketOpen.bind(this),this.connect()}return e.prototype.addCreateVoteListener=function(e){this.createEvent.addEventListener(e)},e.prototype.addUpdateVoteListener=function(e){this.updateEvent.addEventListener(e)},e.prototype.removeCreateVoteListener=function(e){this.createEvent.removeEventListener(e)},e.prototype.removeUpdateVoteListener=function(e){this.updateEvent.removeEventListener(e)},e.prototype.connect=function(){this.WS=new WebSocket(this.URL),this.WS.addEventListener("close",this.onSocketClose),this.WS.addEventListener("error",this.onSocketError),this.WS.addEventListener("message",this.onSocketMessage),this.WS.addEventListener("open",this.onSocketOpen)},e.prototype.onSocketError=function(e){console.log("error in socket occurred: "+e.message+". closing socket"),null!==this.WS&&this.WS.close()},e.prototype.onSocketClose=function(){var t=this;console.log("socket closed, reconnecting in "+e.RECONNECT_INTERVAL+"ms"),window.setTimeout((function(){return t.connect()}),e.RECONNECT_INTERVAL)},e.prototype.onSocketMessage=function(e){try{var t=JSON.parse(e.data);"CREATE"===t.request?this.createEvent.dispatch(t):"UPDATE"===t.request?this.updateEvent.dispatch(t):console.warn("unknown request type: "+t.request)}catch(e){console.error("failed to parse json data: "+e)}},e.prototype.onSocketOpen=function(){console.log("successfully connected to websocket")},e.RECONNECT_INTERVAL=1e3,e}(),i=function(){function e(t,n){this.bar=document.createElement("div"),this.barWrapper=document.createElement("div"),this.labelMatch=document.createElement("span"),this.labelWrapper=document.createElement("div"),this.labelText=document.createElement("span"),this.labelVotes=document.createElement("span"),this.bar.classList.add("bar"),this.barWrapper.classList.add("barWrapper"),this.labelWrapper.classList.add("labelWrapper"),this.matches=[],this.labelWrapper.append(this.labelMatch,this.labelText,this.labelVotes),this.barWrapper.append(this.labelWrapper),this.barWrapper.append(this.bar),this.bar.style.height=e.BAR_HEIGHT+"px",this.barWrapper.style.height=e.BAR_HEIGHT+"px",this.barWrapper.style.width=e.BAR_WIDTH+"px",this.label=t,this.votes=n}return e.prototype.getBarWrapper=function(){return this.barWrapper},Object.defineProperty(e.prototype,"label",{set:function(e){this.labelText.innerText=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"votes",{set:function(e){this.labelVotes.innerText=e.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{set:function(e){this.bar.style.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"matches",{set:function(e){this.labelMatch.innerText=e.join("/")+"."},enumerable:!1,configurable:!0}),e.BAR_WIDTH=350,e.BAR_HEIGHT=30,e}(),s=[],a=0,c=document.getElementById("barContainer"),l=document.getElementById("totalVotes"),p=new r("ws://localhost:9091");function u(e){s.forEach((function(e){return e.getBarWrapper().remove()})),s=e.voteOptions.map((function(e){return new i(e.label,e.votes)})),function(){if(null===c)throw new Error("could not find bar container in DOM");c.append.apply(c,s.map((function(e){return e.getBarWrapper()})))}(),a=e.totalVotes,h()}function h(){if(null===l)throw new Error("could not find total votes in DOM");l.innerText="Total Votes: "+a.toString()}p.addCreateVoteListener(u),p.addUpdateVoteListener((function(e){var t=e.voteOptions,n=e.totalVotes;s.length!==t.length?(console.error("bar amount is not equal to vote options length, treating as new vote"),u(e)):(t.forEach((function(t,o){var r=s[o],a=n>0?i.BAR_WIDTH/e.totalVotes*t.votes:0;r.votes=t.votes,r.barWidth=a+"px",r.matches=t.matches})),a=n,h())}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpZ2h0RXZlbnQvbGlnaHRFdmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2hhb3NXU0NsaWVudC9jaGFvc1dTQ2xpZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9iYXJzLnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImhhbmRsZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZXIiLCJ0aGlzIiwicHVzaCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmaWx0ZXIiLCJoIiwiZGlzcGF0Y2giLCJkYXRhIiwic2xpY2UiLCJmb3JFYWNoIiwiVVJMIiwiY3JlYXRlRXZlbnQiLCJMaXRlRXZlbnQiLCJ1cGRhdGVFdmVudCIsIldTIiwib25Tb2NrZXRDbG9zZSIsIm9uU29ja2V0RXJyb3IiLCJvblNvY2tldE1lc3NhZ2UiLCJvblNvY2tldE9wZW4iLCJjb25uZWN0IiwiYWRkQ3JlYXRlVm90ZUxpc3RlbmVyIiwibGlzdGVuZXIiLCJhZGRVcGRhdGVWb3RlTGlzdGVuZXIiLCJyZW1vdmVDcmVhdGVWb3RlTGlzdGVuZXIiLCJyZW1vdmVVcGRhdGVWb3RlTGlzdGVuZXIiLCJXZWJTb2NrZXQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwiY2xvc2UiLCJDaGFvc1dTQ2xpZW50IiwiUkVDT05ORUNUX0lOVEVSVkFMIiwid2luZG93Iiwic2V0VGltZW91dCIsIk1FU1NBR0UiLCJKU09OIiwicGFyc2UiLCJyZXF1ZXN0Iiwid2FybiIsImUiLCJsYWJlbCIsInZvdGVzIiwiYmFyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYmFyV3JhcHBlciIsImxhYmVsTWF0Y2giLCJsYWJlbFdyYXBwZXIiLCJsYWJlbFRleHQiLCJsYWJlbFZvdGVzIiwiY2xhc3NMaXN0IiwiYWRkIiwibWF0Y2hlcyIsImFwcGVuZCIsInN0eWxlIiwiaGVpZ2h0IiwiQmFyIiwiQkFSX0hFSUdIVCIsIndpZHRoIiwiQkFSX1dJRFRIIiwiZ2V0QmFyV3JhcHBlciIsImlubmVyVGV4dCIsInRvU3RyaW5nIiwiam9pbiIsImJhcnMiLCJ0b3RhbFZvdGVzIiwiQkFSX0NPTlRBSU5FUiIsImdldEVsZW1lbnRCeUlkIiwiVE9UQUxfVk9URVMiLCJXU19DTElFTlQiLCJjcmVhdGVWb3RlIiwicmVtb3ZlIiwidm90ZU9wdGlvbnMiLCJtYXAiLCJ2b3RlT3B0aW9uIiwiRXJyb3IiLCJ1cGRhdGVCYXJDb250YWluZXIiLCJ1cGRhdGVUb3RhbFZvdGVzIiwibmV3VG90YWxWb3RlcyIsImxlbmd0aCIsImluZGV4IiwiYmFyV2lkdGgiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFB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QVE0QyxZQUFZQyxLQUFJLFNBQUFDLEdBQWMsV0FBSWxCLEVBQUlrQixFQUFXbEMsTUFBT2tDLEVBQVdqQyxVQTZCbkYsV0FDQyxHQUFzQixPQUFsQnlCLEVBQXdCLE1BQU0sSUFBSVMsTUFBTSx1Q0FDNUNULEVBQWNiLE9BQU0sTUFBcEJhLEVBQXdCRixFQUFLUyxLQUFJLFNBQUEvQixHQUFPLE9BQUFBLEVBQUlrQixvQkE5QjVDZ0IsR0FFQVgsRUFBYXJDLEVBQVFxQyxXQUNyQlksSUE4QkQsU0FBU0EsSUFDUixHQUFvQixPQUFoQlQsRUFBc0IsTUFBTSxJQUFJTyxNQUFNLHFDQUMxQ1AsRUFBWVAsVUFBWSxnQkFBZ0JJLEVBQVdILFdBM0NwRE8sRUFBVWxELHNCQUFzQm1ELEdBQ2hDRCxFQUFVaEQsdUJBYVYsU0FBb0JPLEdBQ1gsSUFBQTRDLEVBQTJDNUMsRUFBTyxZQUF6QmtELEVBQWtCbEQsRUFBTyxXQUd0RG9DLEVBQUtlLFNBQVdQLEVBQVlPLFFBQy9CckQsUUFBUUQsTUFBTSx3RUFDZDZDLEVBQVcxQyxLQUVYNEMsRUFBWWhFLFNBQVEsU0FBQ2tFLEVBQVlNLEdBQ2hDLElBQU10QyxFQUFNc0IsRUFBS2dCLEdBQ1hyQixFQUNMbUIsRUFBZ0IsRUFBS3RCLEVBQUlHLFVBQVkvQixFQUFRcUMsV0FBY1MsRUFBV2pDLE1BQVEsRUFDL0VDLEVBQUlELE1BQVFpQyxFQUFXakMsTUFDdkJDLEVBQUl1QyxTQUFjdEIsRUFBUyxLQUMzQmpCLEVBQUlVLFFBQVVzQixFQUFXdEIsV0FHMUJhLEVBQWFhLEVBQ2JEIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IElMaXRlRXZlbnQgfSBmcm9tICcuL2lMaWdodEV2ZW50JztcclxuXHJcbmV4cG9ydCBjbGFzcyBMaXRlRXZlbnQ8VD4gaW1wbGVtZW50cyBJTGl0ZUV2ZW50PFQ+IHtcclxuXHRwcml2YXRlIGhhbmRsZXJzOiAoKGRhdGE6IFQpID0+IHZvaWQpW10gPSBbXTtcclxuXHJcblx0cHVibGljIGFkZEV2ZW50TGlzdGVuZXIoaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkIHtcclxuXHRcdHRoaXMuaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyByZW1vdmVFdmVudExpc3RlbmVyKGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkKTogdm9pZCB7XHJcblx0XHR0aGlzLmhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5maWx0ZXIoaCA9PiBoICE9PSBoYW5kbGVyKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBkaXNwYXRjaChkYXRhOiBUKSB7XHJcblx0XHR0aGlzLmhhbmRsZXJzLnNsaWNlKDApLmZvckVhY2goaCA9PiBoKGRhdGEpKTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgSUNoYW9zV1NDbGllbnQgfSBmcm9tICcuL2lDaGFvc1dTQ2xpZW50JztcclxuaW1wb3J0IHsgTGl0ZUV2ZW50IH0gZnJvbSAnLi4vbGlnaHRFdmVudCc7XHJcbmltcG9ydCB7IElWb3RlT3B0aW9uIH0gZnJvbSAnLi9pVm90ZU9wdGlvbic7XHJcbmltcG9ydCB7IElNZXNzYWdlIH0gZnJvbSAnLi9pTWVzc2FnZSc7XHJcbmltcG9ydCB7IFRNZXNzYWdlTGlzdGVuZXIgfSBmcm9tICcuL3RNZXNzYWdlTGlzdGVuZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIENoYW9zV1NDbGllbnQgaW1wbGVtZW50cyBJQ2hhb3NXU0NsaWVudCB7XHJcblx0cHVibGljIHN0YXRpYyBSRUNPTk5FQ1RfSU5URVJWQUwgPSAxMDAwO1xyXG5cclxuXHRwcml2YXRlIGNyZWF0ZUV2ZW50ID0gbmV3IExpdGVFdmVudDxJTWVzc2FnZT4oKTtcclxuXHRwcml2YXRlIHVwZGF0ZUV2ZW50ID0gbmV3IExpdGVFdmVudDxJTWVzc2FnZT4oKTtcclxuXHJcblx0cHJpdmF0ZSBXUzogV2ViU29ja2V0IHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdHByaXZhdGUgVVJMOiBzdHJpbmc7XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihVUkw6IHN0cmluZykge1xyXG5cdFx0dGhpcy5VUkwgPSBVUkw7XHJcblxyXG5cdFx0Ly8gQmluZCB0aGUgbGlzdGVuZXIgbWV0aG9kc1xyXG5cdFx0dGhpcy5vblNvY2tldENsb3NlID0gdGhpcy5vblNvY2tldENsb3NlLmJpbmQodGhpcyk7XHJcblx0XHR0aGlzLm9uU29ja2V0RXJyb3IgPSB0aGlzLm9uU29ja2V0RXJyb3IuYmluZCh0aGlzKTtcclxuXHRcdHRoaXMub25Tb2NrZXRNZXNzYWdlID0gdGhpcy5vblNvY2tldE1lc3NhZ2UuYmluZCh0aGlzKTtcclxuXHRcdHRoaXMub25Tb2NrZXRPcGVuID0gdGhpcy5vblNvY2tldE9wZW4uYmluZCh0aGlzKTtcclxuXHJcblx0XHR0aGlzLmNvbm5lY3QoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhZGRDcmVhdGVWb3RlTGlzdGVuZXIobGlzdGVuZXI6IFRNZXNzYWdlTGlzdGVuZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMuY3JlYXRlRXZlbnQuYWRkRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcik7XHJcblx0fVxyXG5cdHB1YmxpYyBhZGRVcGRhdGVWb3RlTGlzdGVuZXIobGlzdGVuZXI6IFRNZXNzYWdlTGlzdGVuZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMudXBkYXRlRXZlbnQuYWRkRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcik7XHJcblx0fVxyXG5cdHB1YmxpYyByZW1vdmVDcmVhdGVWb3RlTGlzdGVuZXIobGlzdGVuZXI6IFRNZXNzYWdlTGlzdGVuZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMuY3JlYXRlRXZlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcik7XHJcblx0fVxyXG5cdHB1YmxpYyByZW1vdmVVcGRhdGVWb3RlTGlzdGVuZXIobGlzdGVuZXI6IFRNZXNzYWdlTGlzdGVuZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMudXBkYXRlRXZlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcik7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNvbm5lY3QoKTogdm9pZCB7XHJcblx0XHR0aGlzLldTID0gbmV3IFdlYlNvY2tldCh0aGlzLlVSTCk7XHJcblxyXG5cdFx0dGhpcy5XUy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsIHRoaXMub25Tb2NrZXRDbG9zZSk7XHJcblx0XHQvLyBcImFzIGFueVwiIGlzIHJlcXVpcmVkIGJlY2F1c2UgdHlwZXNjcmlwdCB0aGlua3MgdGhhdCB0aGUgd2Vic29ja2V0IFwib25FcnJvclwiXHJcblx0XHQvLyBoYXMgYW4gZXZlbnQsIGFuZCBub3QgYW5kIGVycm9yIGFzIGNhbGxiYWNrIGRhdGFcclxuXHRcdHRoaXMuV1MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCB0aGlzLm9uU29ja2V0RXJyb3IgYXMgYW55KTtcclxuXHRcdHRoaXMuV1MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25Tb2NrZXRNZXNzYWdlKTtcclxuXHRcdHRoaXMuV1MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIHRoaXMub25Tb2NrZXRPcGVuKTtcclxuXHR9XHJcblx0cHJpdmF0ZSBvblNvY2tldEVycm9yKGVycm9yOiBFcnJvcik6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coYGVycm9yIGluIHNvY2tldCBvY2N1cnJlZDogJHtlcnJvci5tZXNzYWdlfS4gY2xvc2luZyBzb2NrZXRgKTtcclxuXHRcdGlmICh0aGlzLldTICE9PSBudWxsKSB0aGlzLldTLmNsb3NlKCk7XHJcblx0fVxyXG5cdHByaXZhdGUgb25Tb2NrZXRDbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKGBzb2NrZXQgY2xvc2VkLCByZWNvbm5lY3RpbmcgaW4gJHtDaGFvc1dTQ2xpZW50LlJFQ09OTkVDVF9JTlRFUlZBTH1tc2ApO1xyXG5cclxuXHRcdHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuY29ubmVjdCgpLCBDaGFvc1dTQ2xpZW50LlJFQ09OTkVDVF9JTlRFUlZBTCk7XHJcblx0fVxyXG5cdHByaXZhdGUgb25Tb2NrZXRNZXNzYWdlKG1lc3NhZ2U6IE1lc3NhZ2VFdmVudCk6IHZvaWQge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgTUVTU0FHRTogSU1lc3NhZ2UgPSBKU09OLnBhcnNlKG1lc3NhZ2UuZGF0YSk7XHJcblxyXG5cdFx0XHRpZiAoTUVTU0FHRS5yZXF1ZXN0ID09PSAnQ1JFQVRFJykgdGhpcy5jcmVhdGVFdmVudC5kaXNwYXRjaChNRVNTQUdFKTtcclxuXHRcdFx0ZWxzZSBpZiAoTUVTU0FHRS5yZXF1ZXN0ID09PSAnVVBEQVRFJykgdGhpcy51cGRhdGVFdmVudC5kaXNwYXRjaChNRVNTQUdFKTtcclxuXHRcdFx0ZWxzZSBjb25zb2xlLndhcm4oYHVua25vd24gcmVxdWVzdCB0eXBlOiAke01FU1NBR0UucmVxdWVzdH1gKTtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihgZmFpbGVkIHRvIHBhcnNlIGpzb24gZGF0YTogJHtlfWApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRwcml2YXRlIG9uU29ja2V0T3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIHdlYnNvY2tldCcpO1xyXG5cdH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgQmFyIHtcclxuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEJBUl9XSURUSCA9IDM1MDtcclxuXHRwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEJBUl9IRUlHSFQgPSAzMDtcclxuXHJcblx0cHJpdmF0ZSBiYXI6IEhUTUxEaXZFbGVtZW50O1xyXG5cdHByaXZhdGUgYmFyV3JhcHBlcjogSFRNTERpdkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBsYWJlbE1hdGNoOiBIVE1MU3BhbkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBsYWJlbFRleHQ6IEhUTUxTcGFuRWxlbWVudDtcclxuXHRwcml2YXRlIGxhYmVsVm90ZXM6IEhUTUxTcGFuRWxlbWVudDtcclxuXHRwcml2YXRlIGxhYmVsV3JhcHBlcjogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvcihsYWJlbDogc3RyaW5nLCB2b3RlczogbnVtYmVyKSB7XHJcblx0XHQvLyBDcmVhdGUgRE9NIGVsZW1lbnRzXHJcblx0XHR0aGlzLmJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGhpcy5iYXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHR0aGlzLmxhYmVsTWF0Y2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0XHR0aGlzLmxhYmVsV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0dGhpcy5sYWJlbFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0XHR0aGlzLmxhYmVsVm90ZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0XHQvLyBBc3NpZ24gY2xhc3Nlc1xyXG5cdFx0dGhpcy5iYXIuY2xhc3NMaXN0LmFkZCgnYmFyJyk7XHJcblx0XHR0aGlzLmJhcldyYXBwZXIuY2xhc3NMaXN0LmFkZCgnYmFyV3JhcHBlcicpO1xyXG5cdFx0dGhpcy5sYWJlbFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbGFiZWxXcmFwcGVyJyk7XHJcblxyXG5cdFx0dGhpcy5tYXRjaGVzID0gW107XHJcblx0XHQvLyBBc3NlbWJsZSB0aGUgYmFyIGVsZW1lbnRcclxuXHRcdHRoaXMubGFiZWxXcmFwcGVyLmFwcGVuZCh0aGlzLmxhYmVsTWF0Y2gsIHRoaXMubGFiZWxUZXh0LCB0aGlzLmxhYmVsVm90ZXMpO1xyXG5cdFx0dGhpcy5iYXJXcmFwcGVyLmFwcGVuZCh0aGlzLmxhYmVsV3JhcHBlcik7XHJcblx0XHR0aGlzLmJhcldyYXBwZXIuYXBwZW5kKHRoaXMuYmFyKTtcclxuXHJcblx0XHR0aGlzLmJhci5zdHlsZS5oZWlnaHQgPSBgJHtCYXIuQkFSX0hFSUdIVH1weGA7XHJcblx0XHR0aGlzLmJhcldyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gYCR7QmFyLkJBUl9IRUlHSFR9cHhgO1xyXG5cdFx0dGhpcy5iYXJXcmFwcGVyLnN0eWxlLndpZHRoID0gYCR7QmFyLkJBUl9XSURUSH1weGA7XHJcblxyXG5cdFx0Ly8gU2V0IHRoZSBsYWJlbCBjb250ZW50XHJcblx0XHR0aGlzLmxhYmVsID0gbGFiZWw7XHJcblx0XHR0aGlzLnZvdGVzID0gdm90ZXM7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0QmFyV3JhcHBlcigpOiBIVE1MRGl2RWxlbWVudCB7XHJcblx0XHRyZXR1cm4gdGhpcy5iYXJXcmFwcGVyO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBsYWJlbChsYWJlbDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmxhYmVsVGV4dC5pbm5lclRleHQgPSBsYWJlbDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgdm90ZXModm90ZXM6IG51bWJlcikge1xyXG5cdFx0dGhpcy5sYWJlbFZvdGVzLmlubmVyVGV4dCA9IHZvdGVzLnRvU3RyaW5nKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IGJhcldpZHRoKHdpZHRoOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuYmFyLnN0eWxlLndpZHRoID0gd2lkdGg7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IG1hdGNoZXMobWF0Y2hlczogc3RyaW5nW10pIHtcclxuXHRcdHRoaXMubGFiZWxNYXRjaC5pbm5lclRleHQgPSBtYXRjaGVzLmpvaW4oJy8nKSArICcuJztcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ2hhb3NXU0NsaWVudCB9IGZyb20gJy4vY2hhb3NXU0NsaWVudC9jaGFvc1dTQ2xpZW50JztcclxuaW1wb3J0IHsgQmFyIH0gZnJvbSAnLi9iYXJzJztcclxuaW1wb3J0IHsgSU1lc3NhZ2UgfSBmcm9tICcuL2NoYW9zV1NDbGllbnQvaU1lc3NhZ2UnO1xyXG5cclxubGV0IGJhcnM6IEJhcltdID0gW107XHJcbmxldCB0b3RhbFZvdGVzID0gMDtcclxuXHJcbi8vIEdldCBET00gZWxlbWVudHNcclxuY29uc3QgQkFSX0NPTlRBSU5FUiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJDb250YWluZXInKTtcclxuY29uc3QgVE9UQUxfVk9URVMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG90YWxWb3RlcycpO1xyXG5cclxuY29uc3QgV1NfQ0xJRU5UID0gbmV3IENoYW9zV1NDbGllbnQoJ3dzOi8vbG9jYWxob3N0OjkwOTEnKTtcclxuXHJcbldTX0NMSUVOVC5hZGRDcmVhdGVWb3RlTGlzdGVuZXIoY3JlYXRlVm90ZSk7XHJcbldTX0NMSUVOVC5hZGRVcGRhdGVWb3RlTGlzdGVuZXIodXBkYXRlVm90ZSk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVWb3RlKG1lc3NhZ2U6IElNZXNzYWdlKTogdm9pZCB7XHJcblx0Ly8gUmVtb3ZlIG9sZCBiYXJzIGZyb20gRE9NXHJcblx0YmFycy5mb3JFYWNoKGJhciA9PiBiYXIuZ2V0QmFyV3JhcHBlcigpLnJlbW92ZSgpKTtcclxuXHQvLyBVcGRhdGUgYmFyc1xyXG5cdGJhcnMgPSBtZXNzYWdlLnZvdGVPcHRpb25zLm1hcCh2b3RlT3B0aW9uID0+IG5ldyBCYXIodm90ZU9wdGlvbi5sYWJlbCwgdm90ZU9wdGlvbi52b3RlcykpO1xyXG5cdHVwZGF0ZUJhckNvbnRhaW5lcigpO1xyXG5cdC8vIFVwZGF0ZSB0aGUgdG90YWwgdm90ZXMgY291bnRlclxyXG5cdHRvdGFsVm90ZXMgPSBtZXNzYWdlLnRvdGFsVm90ZXM7XHJcblx0dXBkYXRlVG90YWxWb3RlcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVWb3RlKG1lc3NhZ2U6IElNZXNzYWdlKTogdm9pZCB7XHJcblx0Y29uc3QgeyB2b3RlT3B0aW9ucywgdG90YWxWb3RlczogbmV3VG90YWxWb3RlcyB9ID0gbWVzc2FnZTtcclxuXHQvLyBDaGVjayBpZiB0aGUgbGVuZ3RoIG9mIHRoZSB2b3RlIG9wdGlvbnMgaXMgdGhlIHNhbWUgYXMgdGhlIGJhciBhbW91bnQuXHJcblx0Ly8gSWYgbm90LCBhbiBlcnJvciBvY3VycmVkIGFuZCB3ZSBqdXN0IHRyZWF0IHRoZSB1cGRhdGUgYXMgY3JlYXRlXHJcblx0aWYgKGJhcnMubGVuZ3RoICE9PSB2b3RlT3B0aW9ucy5sZW5ndGgpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoYGJhciBhbW91bnQgaXMgbm90IGVxdWFsIHRvIHZvdGUgb3B0aW9ucyBsZW5ndGgsIHRyZWF0aW5nIGFzIG5ldyB2b3RlYCk7XHJcblx0XHRjcmVhdGVWb3RlKG1lc3NhZ2UpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR2b3RlT3B0aW9ucy5mb3JFYWNoKCh2b3RlT3B0aW9uLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRjb25zdCBiYXIgPSBiYXJzW2luZGV4XTtcclxuXHRcdFx0Y29uc3QgQkFSX1dJRFRIID1cclxuXHRcdFx0XHRuZXdUb3RhbFZvdGVzID4gMCA/IChCYXIuQkFSX1dJRFRIIC8gbWVzc2FnZS50b3RhbFZvdGVzKSAqIHZvdGVPcHRpb24udm90ZXMgOiAwO1xyXG5cdFx0XHRiYXIudm90ZXMgPSB2b3RlT3B0aW9uLnZvdGVzO1xyXG5cdFx0XHRiYXIuYmFyV2lkdGggPSBgJHtCQVJfV0lEVEh9cHhgO1xyXG5cdFx0XHRiYXIubWF0Y2hlcyA9IHZvdGVPcHRpb24ubWF0Y2hlcztcclxuXHRcdH0pO1xyXG5cdFx0Ly8gVXBkYXRlIHRvdGFsIHZvdGVzXHJcblx0XHR0b3RhbFZvdGVzID0gbmV3VG90YWxWb3RlcztcclxuXHRcdHVwZGF0ZVRvdGFsVm90ZXMoKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUJhckNvbnRhaW5lcigpOiB2b2lkIHtcclxuXHRpZiAoQkFSX0NPTlRBSU5FUiA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgZmluZCBiYXIgY29udGFpbmVyIGluIERPTScpO1xyXG5cdEJBUl9DT05UQUlORVIuYXBwZW5kKC4uLmJhcnMubWFwKGJhciA9PiBiYXIuZ2V0QmFyV3JhcHBlcigpKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVRvdGFsVm90ZXMoKTogdm9pZCB7XHJcblx0aWYgKFRPVEFMX1ZPVEVTID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBmaW5kIHRvdGFsIHZvdGVzIGluIERPTScpO1xyXG5cdFRPVEFMX1ZPVEVTLmlubmVyVGV4dCA9IGBUb3RhbCBWb3RlczogJHt0b3RhbFZvdGVzLnRvU3RyaW5nKCl9YDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9